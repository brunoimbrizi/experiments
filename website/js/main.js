// Generated by CoffeeScript 1.6.3
(function() {
  requirejs(['jquery', 'jquery.animate-colors-min', 'jquery.easing.1.3', 'jquery.address-1.5.min'], function($) {});

  $(function() {
    var _this = this;
    window.app = {
      current: null,
      NUM_EXPERIMENTS: null,
      initMenu: function() {
        /*
        			@NUM_EXPERIMENTS = $('#info').children().length
        
        			for i in [0...app.NUM_EXPERIMENTS]
        				a = app.addLeadingZero(i + 1)
        				$('#menu').append '<a href="' + a + '/index.html">' + a + '</a>'
        */

        var a, arr, i, n, _i, _ref;
        arr = ['01', '02', '03', '04', '05', '06', '07', '08', '09', 'go-with-the-flow'];
        this.NUM_EXPERIMENTS = arr.length;
        for (i = _i = 0, _ref = app.NUM_EXPERIMENTS; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
          n = app.addLeadingZero(i + 1);
          a = arr[i];
          $('#menu').append('<a href="' + a + '/index.html">' + n + '</a>');
        }
        $('#menu a').bind('click', app.onMenuClick);
        $('#info').css('display', 'block');
        return $('#loading').css('display', 'none');
      },
      onUiMouseOver: function(e) {
        $('#menu').stop().animate({
          backgroundColor: 'rgba(0, 0, 0, 0.95)'
        }, 100);
        return $('#info').stop().animate({
          backgroundColor: 'rgba(0, 0, 0, 0.95)'
        }, 100);
      },
      onUiMouseOut: function(e) {
        $('#menu').stop().animate({
          backgroundColor: 'rgba(0, 0, 0, 0.8)'
        }, 200);
        return $('#info').stop().animate({
          backgroundColor: 'rgba(0, 0, 0, 0.6)'
        }, 200);
      },
      onMenuClick: function(e) {
        e.preventDefault();
        return $.address.value(e.target.innerHTML);
      },
      navTo: function(index) {
        var a, href, i, target, _i, _j, _ref, _ref1;
        index = Math.floor(index) - 1;
        target = $('#menu a')[index];
        href = $(target).attr('href') + '?' + $.address.queryString();
        if (this.current === null) {
          $('#content iframe').remove();
          $('<iframe/>').attr('src', href).appendTo('#content');
        } else {
          $('#overlay').css('display', 'block');
          $('#overlay').css('left', '0');
          $('#overlay').width(0);
          $('#overlay').animate({
            width: $(window).width()
          }, 800, 'easeInOutQuint', function() {
            $('#content iframe').remove();
            $('<iframe/>').attr('src', href).appendTo('#content');
            $('#content iframe').load(app.onIframeLoad);
            return $('body').removeClass();
          });
        }
        for (i = _i = 0, _ref = $('#menu a').length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
          a = $($('#menu a')[i]);
          if (a.hasClass('selected')) {
            a.removeClass('selected');
          }
        }
        $(target).addClass('selected');
        this.current = index;
        for (i = _j = 0, _ref1 = $('#info span').length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; i = 0 <= _ref1 ? ++_j : --_j) {
          $($('#info span')[i]).css('display', 'none');
        }
        if (!$('#info span')[index]) {
          $('#info').css('display', 'none');
        } else {
          $('#info').css('display', 'block');
          $($('#info span')[index]).css('display', 'inline-block');
        }
        return $('#content iframe').focus();
      },
      onIframeLoad: function() {
        $('#content iframe').unbind('load');
        $('#content iframe').focus();
        return $('#overlay').animate({
          left: $(window).width(),
          width: 0
        }, 1000, 'easeInOutQuint', function() {
          return $('#overlay').css('display', 'none');
        });
      },
      updateBodyClass: function(param) {
        $('body').removeClass();
        return $('body').addClass(param);
      },
      addLeadingZero: function(num) {
        if (num < 10) {
          return '0' + num;
        }
        return num;
      },
      resize: function() {
        var i, w, wmenu, _i, _ref;
        wmenu = 0;
        for (i = _i = 0, _ref = $('#menu').children().length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
          wmenu += $('#menu').children().eq(i).outerWidth(true);
        }
        w = $(window).width() - $('#title').outerWidth(true) - $('#social').outerWidth(true) - wmenu - 1;
        $('#info').outerWidth(w);
        return null;
      }
    };
    return window.onload = function() {
      app.initMenu();
      $.address.change(function(e) {
        return app.navTo($.address.value().substr(1, 2));
      });
      if (!$.address.value().substr(1)) {
        $.address.value($('#menu a')[0].innerHTML);
      } else {
        app.navTo($.address.value().substr(1, 2));
      }
      $(window).resize(app.resize);
      return app.resize();
    };
  });

}).call(this);
